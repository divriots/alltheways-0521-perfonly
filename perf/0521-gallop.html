<html>
<head>
<meta charset="UTF-8">

</head>
<body>
<script type="module">const t=(t,e,n)=>{var o;return t.insertBefore(e,null!==(o=null==n?void 0:n.nextSibling)&&void 0!==o?o:null)};function e(t,e,n=!1){const o=new Range;return n?o.setStartBefore(t):o.setStartAfter(t),n?o.setEndAfter(e):o.setEndBefore(e),o.extractContents()}const n=new Range;function o(t){return null!==t&&"object"==typeof t}function s(t){return null==t?"":"string"==typeof t?t:"function"==typeof t||"symbol"==typeof t||"number"==typeof t?String(t):JSON.stringify(t)}function r(t){return Object.keys(t)}function i(t,e){if(Object.is(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;const n=r(t),o=r(e);if(n.length!==o.length)return!1;for(let o=0;o<n.length;o++)if(!(n[o]in e)||!Object.is(t[n[o]],e[n[o]]))return!1;return!0}const c=t=>[...t].reduce(((t,e)=>(t=(t<<5)-t+e.charCodeAt(0))&t),0);function a(t,e,n){const o=t.get(e);if(o)return o;const s=n();return t.set(e,s),s}class l{}l.dirtyCollectionSet=new WeakSet,l.markDirty=t=>l.dirtyCollectionSet.add(t),l.checkDirty=t=>l.dirtyCollectionSet.has(t),l.resetDirtyCollectionSet=()=>l.dirtyCollectionSet=new WeakSet,l.compareDepends=(t,e)=>{let n=!1;if(t&&e)for(let s=0;s<e.length;s++){const r=e[s];if(o(r)&&(!Object.is(r,t[s])||l.checkDirty(r))||!Object.is(r,t[s])){n=!0;break}}else n=!0;return n};const u=new WeakMap,h=[Map,Set,WeakMap,WeakSet],d=Symbol("__raw__"),f=(t,{onMut:e,onGet:n,lock:s=!1,deep:r=!0}={})=>{const c=t=>r&&o(t)?a(u,t,(()=>f(t,{onGet:n,onMut:e,lock:s,deep:r}))):t;if(h.some((e=>t instanceof e))){const s={get:function(t){const e=Reflect.get(this,d);return null==n||n(e,t,this),c(e.get(t))},set:function(t,n){const s=Reflect.get(this,d),r=s.get(t);return!i(o(r)?Reflect.get(r,d):r,n)&&(null==e||e(s,t,n,this),l.markDirty(this)),s.set(t,n)},delete:function(t){const n=Reflect.get(this,d);return n.has(t)&&(null==e||e(n,t,void 0,this),l.markDirty(this)),n.delete(t)},clear:function(){const t=Reflect.get(this,d);return t.size&&(null==e||e(t,void 0,void 0,this),l.markDirty(this)),t.clear()},add:function(t){const n=Reflect.get(this,d);return n.has(t)||(null==e||e(n,void 0,t,this),l.markDirty(this)),n.add(t)}};return new Proxy(t,{get:(t,e,n)=>{var o,r;if(e===d)return t;const i=Reflect.get(t,e,n);return"function"==typeof i?null!==(r=null===(o=Reflect.get(s,e))||void 0===o?void 0:o.bind(n))&&void 0!==r?r:i.bind(t):i}})}return new Proxy(t,{set:(t,n,o,r)=>{if(s&&!(n in t))throw((t,e)=>new Error(`Can not set new property [${String(e)}] to locked object [${JSON.stringify(t)}].`))(t,n);const c=!i(Reflect.get(t,n),o),a=Reflect.set(t,n,o,r);return c&&(Array.isArray(t)&&l.markDirty(r),null==e||e(t,n,o,r)),a},get:(t,e,o)=>{if(e===d)return t;const s=Reflect.get(t,e);return null==n||n(t,e,o),c(s)}})};let p;let v;const m=new WeakMap;const y=new WeakMap,g=new WeakMap;function w(t,e){const n=b.resolveCurrent(),[o,s]=function(t){var e;const n=b.resolveCurrent();if(n!==p&&(v=0),!t)return v++,[!0,v-1];const o=null===(e=m.get(n))||void 0===e?void 0:e.get(v),s=l.compareDepends(o,t);return a(m,n,(()=>new Map)).set(v,t),p=n,v++,[s,v-1]}(e);if(o){let e=n.$root.querySelector("style.hook-style-"+s);e||(e=document.createElement("style"),e.classList.add("hook-style-"+s),n.$root.append(e)),e.innerHTML=t()}}class b{constructor(){}static flush(){b.dirty||(b.dirty=!0,requestAnimationFrame((()=>{b.updateQueue.forEach((t=>{b.setCurrent(t),t.dispatchUpdate(),b.loopEachCallbacks.forEach((e=>e.cb(t)))})),b.setCurrent(void 0),b.dirty=!1,b.updateQueue.clear(),b.loopEndCallbacks.forEach((t=>t.cb()))})))}static setLoopEachCallBack(t,e,n=0){this.setLoopCallback(b.loopEachCallbacks,t,e,n)}static setLoopEndCallBack(t,e,n=0){this.setLoopCallback(b.loopEndCallbacks,t,e,n)}static setLoopCallback(t,e,n,o=0){for(let s=0;s<=t.length;s++){const r=t[s];if(!r||r.priority<o||s===t.length)return void t.splice(s-1,0,{name:e,cb:n,priority:o})}}}b.resolveCurrent=()=>b.current,b.setCurrent=t=>b.current=t,b.enUpdateQueue=t=>b.updateQueue.add(t)&&b.flush(),b.loopEachCallbacks=[],b.loopEndCallbacks=[],b.updateQueue=new Set,b.dirty=!1,b.setLoopEndCallBack("resetLastDepEl",(()=>p=void 0),1),b.setLoopEndCallBack("resetDirtyCollectionSet",l.resetDirtyCollectionSet,0),b.setLoopEachCallBack("resolveEffects",(function(t){const e=y.get(t);return e&&setTimeout((()=>{const{length:n}=e;0!==n&&e.forEach((async(n,o)=>{const s=await(null==n?void 0:n());if(s){let n;const r=g.get(t);r?n=r:(n=[],g.set(t,n),e.filter(Boolean).length&&C(t,(()=>{n.forEach((t=>t())),g.delete(t)}))),n[o]=s}}))}),0)}));const k=new Set,E=new Map;const C=(t,e)=>{t.addEventListener("$disconnected$",e)},$=(t,e)=>Object.assign(t.$props,e),x=new WeakSet;function S(t){return"function"==typeof t&&x.has(t)}function N(t,e){let n=!1;for(;S(t);)n=!0,t=t(e);return n}class R{constructor(t){this.location=t;const e=t.startNode.parentNode;this.contextNode=e}static create(t){const e=new DocumentFragment,n=new Comment(t),o=new Comment(t);return e.append(n,o),new R({startNode:n,endNode:o})}setValue(t){if(N(t,this))return;if(null==t)return this.clear(),void(this.value=t);const[e,n]=function(t,e,n){return Object.is(t,e)?[t,0]:t instanceof j&&e instanceof D&&t.hash===c(e.do(B))?[t.patch(e.do(A)),1]:[L(e,n),2]}(this.value,t,this.contextNode);if(2===n){const{endNode:n}=this.location,o=n.parentNode;this.clear(),e instanceof j?e.appendTo(o,n):o.insertBefore(new Text(s(t)),n)}return this.value=e,this.value}clear(){const{startNode:t,endNode:n}=this.location;return e(t,n)}destroy(){const{startNode:t,endNode:n}=this.location;return e(t,n,!0)}moveInto(t,e){t.insertBefore(this.destroy(),null!=e?e:null),this.contextNode=t}}function L(t,e){if(Array.isArray(t))throw new SyntaxError("use repeat() directive");return t instanceof D?t.createPatcher(e).patch(t.do(A)):t}let M={".":class{constructor(t){var e;this.location=t;const n=null!==(e=t.node.getAttribute("style"))&&void 0!==e?e:void 0;this.cache={style:n}}setValue(t){if(N(t,this))return;if(this.value===t)return;const{node:e,name:n}=this.location;if("checked"===n&&e instanceof HTMLInputElement&&["checkbox","radio"].includes(e.type)||"value"===n)return Reflect.set(e,n,t),void(this.value=t);let o=s(t);if("class"===n){const{classes:t}=this.cache,n=o.split(" ").filter(Boolean);return n.join("")!==(null==t?void 0:t.join(""))&&(e.classList.remove(...null!=t?t:[]),e.classList.add(...n),this.cache.classes=n),void(this.value=n)}if("style"===n){const{style:t}=this.cache;o=`${null!=t?t:""}${t?";":""}${o}`}e.setAttribute(n,o),this.value=o}clear(){throw new Error("Method not implemented.")}},":":class{constructor(t){this.location=t}setValue(t){if(N(t,this))return;const{name:e,node:n}=this.location;if(!(t=>!(!t||!Reflect.get(t,"$isReactive")))(n))throw(t=>new SyntaxError(`[${t}] element is not an Reactive Element`))(e);if("$props"===e){if(!o(t))throw new SyntaxError("$props must bind a {key:value} object");$(n,t)}else((t,e,n)=>{Reflect.set(t.$props,e,n)})(n,e,t);this.value=t}clear(){throw new Error("Method not implemented.")}},"@":class{constructor(t){this.location=t,this.cache=[];const[e,...n]=t.name.split(".");var o;this.options={capture:(o=new Set(n)).has("capture"),once:o.has("once"),passive:o.has("passive")},this.eventName=e}setValue(t){if(N(t,this))return;let e;e=Array.isArray(t)?t:[t];const{node:n}=this.location,{cache:o,eventName:s,options:r}=this,i=Math.max(e.length,o.length);for(let t=0;t<i;t++){const i=e[t],c=o[t];Object.is(c,i)||(c&&n.removeEventListener(s,c,r),i&&n.addEventListener(s,i,r),o[t]=i)}this.value=e}clear(){this.cache.forEach((t=>this.location.node.removeEventListener(this.eventName,t,this.options))),this.cache.length=0}},"?":class{constructor(t){this.location=t,this.value=!1}setValue(t){if(N(t,this))return;const e=!!t,{name:n,node:o}=this.location;this.value!==e&&o.toggleAttribute(n),this.value=e}clear(){throw new Error("Method not implemented.")}}};class j{constructor(e,n,o){this.dof=e,this.size=n,this.hash=o,this.parts=function(e){var n;const o=[],{dof:s,size:i}=e,c=document.createTreeWalker(s,133);let a=0;const l=r(M);for(;a<i;){c.nextNode();const{currentNode:e}=c;if(null===e)break;if(e instanceof HTMLStyleElement)throw new SyntaxError(`Can not put dynamic part inside or after [${e}], try using useStyle() instead.`);if(e instanceof Element){const{attributes:t}=e,{length:s}=t,r=[];for(let n=0;n<s;n++){const{name:s}=t[n],i=s[0];if(l.includes(i)&&(":"!==i||"\x3c!--π--\x3e"===t[n].value)){const t=s.slice(1);o.push(new M[i]({node:e,name:t})),r.push(s),a++}}null===(n=window.requestIdleCallback)||void 0===n||n.call(window,(()=>r.forEach((t=>e.removeAttribute(t)))))}else if((u=e).constructor===Comment&&"π"===u.data){const n=new Comment("π");t(e.parentNode,n,e),o.push(new R({startNode:e,endNode:n})),c.nextNode(),a++}}var u;return o}(this)}patch(t){for(let e=this.parts.length-1;e>=0;e--)this.parts[e].setValue(t[e]);return this}appendTo(t,e){e?t.insertBefore(this.dof,e):t.appendChild(this.dof),Reflect.set(this,"dof",void 0)}}class D extends(function(t){return class extends t{do(t,...e){return t.call(this,...e)}}}(Object)){constructor(t,e){super(),this.strs=t,this.vals=e}createPatcher(t){const e=this.do(B);return new j(function(t,e){return n.selectNodeContents(e instanceof DocumentFragment||!e?document.body:e),n.createContextualFragment(t)}(e,t),this.vals.length,c(e))}}function A(){return this.vals}function B(){return this.strs.join("\x3c!--π--\x3e").replace(/((?=>|^)\s+)|(\s+(?=<|$))/g,"")}function O(t,...e){return new D(t,e)}function T(t,...e){return t.reduce(((t,n,o)=>{var s;return`${t}${n}${null!==(s=e[o])&&void 0!==s?s:""}`}),"").trim()}!function(t,e,{shadow:n=!0,extend:o,Inherit:s=HTMLElement}={}){k.add(t),customElements.define(t,class extends s{constructor(){var t;super(),this.$builder=e,this.$root=n?this.attachShadow({mode:"open"}):this,this.$patcher=void 0,this.$props=f({},{onMut:()=>this.requestUpdate()}),this.$state=void 0,this.$contexts=new Set,this.$isReactive=!0,$(this,(t=this.attributes,Array.from(t).filter((t=>/^:\S+/.test(t.name)&&"\x3c!--π--\x3e"!==t.value)).reduce(((t,{name:e,value:n})=>{let o;return o=""===n||("''"===n?"":n),Reflect.set(t,e.slice(1),o),t}),{}))),this.requestUpdate()}requestUpdate(){b.enUpdateQueue(this)}dispatchUpdate(){const t=this.$builder.call(this,this.$props);this.$patcher||(this.$patcher=t.createPatcher(this),this.$patcher.appendTo(this.$root)),this.$patcher.patch(t.do(A))}connectedCallback(){if(E.has(t))E.get(t).add(this);else{const e=new Set;e.add(this),E.set(t,e)}}disconnectedCallback(){this.$contexts.forEach((t=>t.unwatch(this))),this.dispatchEvent(new CustomEvent("$disconnected$")),E.get(t).delete(this)}},{extends:o})}("my-counter",(()=>{const[t]=function(t){const e=b.resolveCurrent();return[e.$state?e.$state:e.$state=f(t,{onMut:()=>e.requestUpdate()})]}({count:0});return w((()=>T`
      * {
        font-size: 200%;
      }
      span {
        width: 4rem;
        display: inline-block;
        text-align: center;
      }
      button {
        width: 64px;
        height: 64px;
        border: none;
        border-radius: 10px;
        background-color: seagreen;
        color: white;
      }
    `),[]),O`
    <button @click="${()=>t.count--}">
      -
    </button>
    <span>${t.count}</span>
    <button @click="${()=>t.count++}">
      +
    </button>
  `}));
//# sourceMappingURL=index.js.map
</script>
<my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter><my-counter></my-counter>
</body>
</html>